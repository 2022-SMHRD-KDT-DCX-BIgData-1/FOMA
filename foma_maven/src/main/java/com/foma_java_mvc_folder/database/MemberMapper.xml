<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
      <!--selet,insertmupdate,delete 태그들이 존재함  -->
    <!--namespace: id를 그룹화, 보통 mapper의 경로를 입력  -->
    <!--resulttype 리턴타입  -->
    <!--바인드 변수처럼 필드명 컬럼명  -->
    
    
<mapper namespace="com.foma_java_mvc_folder.database.MemberMapper">
 
   
 <!--resultmap 이용해서 오라클 넘버타입 일치  -->
 
<resultMap type="com.foma_java_mvc_folder.domain.FMember" id="fdrsmap">
<!--   <result column="username" property="username" />
  <result column="userpw" property="userpw"/>
  <result column="useremail" property="useremail" />
   <result  column="userage" property="userage"  javaType="java.lang.Double"/>
 <result column="userheight" property="userheight" javaType="java.lang.Double"/>
  <result column="userweight" property="userweight" javaType="java.lang.Double"/>
  <result column="userbmi" property="userbmi" javaType="java.lang.Double"/> -->
<!--   
<result property="fd_name" column="fd_name" nullValue="" /> 

 -->

</resultMap> 
   
   
   
   
     <!--   유저 데이터 관련 쿼리 명령문들  -->
    
    <insert id="insertMember" parameterType="com.foma_java_mvc_folder.domain.Member">
  insert into Member values (#{username},#{userpw},#{useremail},#{userage},#{userheight},#{userweight},#{userdiabetes},#{userhbp},#{userbmi})
  
  </insert>
  <select id="selectMember" parameterType="com.foma_java_mvc_folder.domain.Member"  resultType = "com.foma_java_mvc_folder.domain.Member">

 select * from Member where username = #{username} and userpw = #{userpw}
 
  </select>
  
  <select id="selectMembernopw" parameterType="com.foma_java_mvc_folder.domain.Member"  resultType = "com.foma_java_mvc_folder.domain.Member">

 select * from Member where username = #{username}
 
  </select>
  
    <select id="selectMembecheck" parameterType="com.foma_java_mvc_folder.domain.Member"  resultType = "com.foma_java_mvc_folder.domain.Member">

 select * from Member where username = #{username} and userpw = #{userpw}
 
  </select>
  
  
   <update id="updateMember" parameterType="com.foma_java_mvc_folder.domain.Member"   >
  update member set useremail=#{useremail}, userage=#{userage},userheight=#{userheight},userweight=#{userweight},userdiabetes=#{userdiabetes},userhbp=#{userhbp},userbmi=#{userbmi}
  where username=#{username}
  
  </update>
  
   <delete id="deleteMember" parameterType="com.foma_java_mvc_folder.domain.Member"   >
 DELETE FROM member WHERE username =#{username}
  
  </delete>
  
  <!--   음식 찾기 관련 쿼리 명령문들, 다중 결과문은 selectlist로 뽑아야함 -->
  
   <select id="selectFMember" parameterType="com.foma_java_mvc_folder.domain.FMember"  resultType = "com.foma_java_mvc_folder.domain.FMember">
<!--비교식 쓰면 xml문법 오류가 생기므로 !cdata로 sql문 감싸기 , like 쿼리문을 검색시 '%'||#{searchKeyword}||'%' 로 감싸야함  -->

   <![CDATA[select * from fmember where fd_name like '%'||#{fd_name}||'%'  and rownum<6]]>
 
  </select>
  
  <select id="selectFMemberlowsalt" parameterType="com.foma_java_mvc_folder.domain.FMember"  resultType = "com.foma_java_mvc_folder.domain.FMember">
<!--저염식 검색, 기준은 소금함량 300이하 -->

   <![CDATA[select * from fmember where fd_name like '%'||#{fd_name}||'%' and fd_ing_salt>-1 and fd_ing_salt<300  and rownum<6]]>
 
  </select>
  
  <select id="selectFMemberlowcal" parameterType="com.foma_java_mvc_folder.domain.FMember"  resultType = "com.foma_java_mvc_folder.domain.FMember">
<!-- 저칼로리 검색, 기준은 칼로리 300이하
 -->
   <![CDATA[select * from fmember where fd_name like '%'||#{fd_name}||'%' and fd_ing_cal>-1 and fd_ing_cal<300  and rownum<6]]>
 
  </select>
 
  <select id="selectFMemberlocarhifat" parameterType="com.foma_java_mvc_folder.domain.FMember"  resultType = "com.foma_java_mvc_folder.domain.FMember">
<!--저탄고지  검색, 탄수화물 20이하   지방 40이상, 기준은 하루2000칼로리 기준 탄수화물 50,단백질100이하, 지방은 150이상 -->
<!--https://freefrdi.com/how-much-fat-for-keto/  -->
<!--데이터 부족으로 숫자적음  -->
   <![CDATA[select * from fmember where fd_name like '%'||#{fd_name}||'%' and fd_ing_carbohydrate>-1 and fd_ing_carbohydrate<20 AND fd_ing_saturated_fatty+fd_ing_trans_fatty+fd_ing_fatty >40  and rownum<6]]>
 
  </select>
  
  <!--카테고리 검색  -->
    <select id="selectFMembercate" parameterType="com.foma_java_mvc_folder.domain.FMember"  resultType = "com.foma_java_mvc_folder.domain.FMember">
  <![CDATA[select * from fmember where fd_category_big_name = #{fd_category_big_name}  and rownum<6]]>
 
  </select>
  
  <!--게시판  -->

 <select id="selectAllBoards" parameterType="com.saeyan.dto.BoardVO" resultType = "com.saeyan.dto.BoardVO">

 select * from board order by num desc
 
  </select>
 
    <insert id="insertBoard" parameterType="com.saeyan.dto.BoardVO">
 <!-- 
  insert into board(num, name, email, pass, title, content) values(board_seq.nextval, #{name}, #{email}, #{pass}, #{title}, #{content});   
   -->
  insert into board(num, name, email, pass, title, content ,readcount ,writedate) values(board_seq.nextval, #{name}, #{email}, #{pass}, #{title}, #{content},#{readcount},#{writedate})
  </insert> 
  

</mapper>